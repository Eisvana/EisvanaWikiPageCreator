import{D as b,ai as G,d as f,a0 as U,aj as q,ak as $,h as I,Z as W,al as _,am as s,an as z,ao as J,u as g,ap as V,f as C,a9 as Y,g as i,aq as Z,t as K,ar as Q,n as d,p as r,as as S,l as o,at as B,au as X,e as ee,aa as L,av as N,R as H,aw as O,s as k,q as R,v as P,m as x,ax as te,ay as ne,az as ae,aA as oe,aB as w,aC as ie}from"./links-D8H9ACrC.js";const le=[{element:"nameInput",func:function(){b()}},{element:"researchTeam",func:function(){G(),f()}},{element:"fileUpload",handler:"change",func:function(){U(this)}},{element:"portalglyphsInput",func:function(){q(this),$(),b()}},{element:"discoveredInput",func:function(){I("discoveredInput","discoveredlinkInput"),f()}},{element:"discoveredlinkInput",func:function(){I("discoveredlinkInput","discoveredInput"),f()}},{element:"docbyInput",func:function(){f()}},{element:"axesInput",handler:"change",func:function(){W()}},{element:"glyphDeleteButton",handler:"click",func:function(){_()}},{element:"fileUploadTooltip",handler:"click",func:function(){s.uploadShown=!0}},{element:"galleryFileUploadTooltip",handler:"click",func:function(){s.galleryUploadShown=!0}}];z(),J(),g(V),C(le),Y();const re={output:{explanationHeading:"explanationHeading",explanationContent:"explanationContent",explanationLink:"explanationLink",explanationWebpImg:"explanationWebpImg",explanationFallbackImg:"explanationFallbackImg"}},A=i.output.explanation;A&&(A.innerHTML=Z),g(re);const ue=["builderInput","builderlinkInput","discoveredInput","discoveredlinkInput"];for(const e of ue){const t=i.input[e];t&&(t.dataset.player="")}function se(){const e=document.querySelectorAll(".table .data input, .table .data textarea"),t=document.querySelectorAll(".table .data select"),n=document.getElementsByTagName("output");for(const t of Array.from(e))switch(t.type.toLowerCase()){case"checkbox":t.checked=!1;break;case"radio":const e=document.querySelectorAll('input[type="radio"]:not([checked])'),n=document.querySelectorAll('input[type="radio"][checked]');for(const t of Array.from(e))t.checked=!1;for(const e of Array.from(n))e.checked=!0;break;default:t.value=""}for(const e of Array.from(t))e.value=e.options?.[0]?.value;for(const e of Array.from(n))e.innerText="";X();for(const e in r)delete r[e];const a=document.querySelectorAll(".error");for(const e of Array.from(a))ee(e.previousElementSibling);for(const e in L)delete L[e];"function"==typeof o.resetExternal&&o.resetExternal(),N(),H(),O()}function T(e,t){e.style.pointerEvents="none";const{innerText:n,dataset:{link:a}}=e;d.text=Q(JSON.stringify(r)),d.copy=!0,d.link=a;const o=S(e);if(o)return e.classList.remove("is-primary"),e.classList.add("is-danger"),e.innerText=o,void setTimeout(()=>{e.classList.remove("is-danger"),e.classList.add("is-primary"),e.innerText=n,e.style.pointerEvents=""},1500);const l=i?.output?.[t]?.innerText?.replaceAll("\n\n\n","\n\n")??t;navigator.clipboard.writeText(l),d.copy=!0,d.link=a,e.innerText="Copied!",setTimeout(()=>{e.innerText=n,e.style.pointerEvents=""},1500)}function ce(e){const t=i.output.fullArticle.innerText.replaceAll("\n\n\n","\n\n"),n=r.name,a=e;a.href="data:text/plain,"+encodeURIComponent(t),a.download=n+".txt"}function M(e,t=r.name){e.style.pointerEvents="none";F(e,B+"Special:EditPage/"+t)}function F(e,t){const n=S(e),a=new RegExp(`[${["#","<",">","[","]","{","|","}"].join("")}]`,"g");if(n){const t=e.innerText;e.removeAttribute("href"),e.className="button is-danger",e.innerText=n,setTimeout(()=>{e.className="button is-outlined is-primary",e.innerText=t,e.style.pointerEvents=""},1500)}else e.href=t.replace(a," "),e.target="_blank",e.rel="noopener noreferrer",e.style.pointerEvents=""}function Ne(){if("function"!=typeof o.redirectPage)return;const e=document.getElementById("reset"),t=["copyRedirect","createRedirect"],n=document.createElement("p");if(n.id="redirectNote",n.classList.add("has-text-centered"),n.innerText="Please create a redirect for your page!",!o.redirectPage())return t.forEach(()=>{const n=e.previousElementSibling;t.includes(n.id)&&n.remove()}),void document.getElementById(n.id)?.remove();const a=document.createElement("button");a.innerText="Copy Redirect Code",a.type="button";const i=document.createElement("a");i.rel="noopener noreferrer",i.target="_blank",i.innerText="Create Redirect",C([{element:a,handler:"click",func:function(){T(this,`#REDIRECT [[${r.name}]]`)}},{element:i,handler:"click",func:function(){M(this,o.redirectPage())}}]);const l=[a,i];for(let n=0;n<l.length;n++){const a=l[n],o=t[n];if(document.getElementById(o))return;a.classList.add("button","is-outlined","is-primary"),a.id=o,a.dataset.link="redirect",e.insertAdjacentElement("beforebegin",a)}e.parentElement.insertAdjacentElement("beforebegin",n)}K();const de='\n<button class="button is-outlined is-primary" id="copy" type="button" data-link="page" data-evt-id="copyButton">Copy Wikicode</button>\n<a class="button is-outlined is-primary" id="download" data-evt-id="downloadButton">Download File</a>\n<a class="button is-outlined is-primary" href="https://nomanssky.fandom.com/wiki/Special:Upload?multiple=true" id="uploadLink" rel="noopener noreferrer" target="_blank">Upload Pictures</a>\n<a class="button is-outlined is-primary" id="create" data-link="page" data-evt-id="createPageButton">Create Page</a>\n<button class="button is-warning" id="reset" type="reset" data-evt-id="resetButton">Reset Inputs</button>',pe=[{element:"copyButton",handler:"click",func:function(){T(this,"fullArticle")}},{element:"downloadButton",handler:"click",func:function(){ce(this)}},{element:"createPageButton",handler:"click",func:function(){M(this)}},{element:"resetButton",handler:"click",func:()=>se()}],me=k(de,{},pe),fe='<p class="has-text-centered">You must copy the code first, then paste it into the wiki page.<br>Also don\'t forget to upload any images you have put here.</p>',v=i.output.actions;v.innerHTML="",R(me,v,"afterbegin"),v.insertAdjacentHTML("beforebegin",fe);const be='\n<label style="display:flex; gap: .3rem"><input class="checkbox" type="checkbox" id="skipCheck" data-evt-id="skipCheck">Enable debug (no checks, no popups)</label>;\n<button style="margin: 0 1rem" class="button is-danger is-small" id="clearCache" data-evt-id="clearCache">Clear Localstorage</button>',ye=[{element:"clearCache",handler:"click",func:()=>localStorage.clear()},{element:"skipCheck",handler:"change",func:function(){const e=this.checked;s.debug=e,s.uploadShown=e,s.galleryUploadShown=e,document.documentElement.dataset.debug=e.toString(),b()}}];i.output.actions,k(be,{},ye),Object.defineProperty(s,"debug",{configurable:!1,writable:!1,value:!1});const y=document.getElementById("skipCheck");y&&new URLSearchParams(window.location.search).has("debug")&&(y.checked=!0,P(y,"change"));const he='<h2 class="title is-5 has-text-left has-text-weight-bold mb-2"> \x3c!-- //NOSONAR this is fine since this snippet is inserted somewhere else --\x3e\n  Eisvana\n  <output\n    id="album"\n    name="type"\n  ></output>\n  <output id="albumType"></output> entry for\n  <output\n    id="albumHeaderName"\n    name="name"\n  ></output\n  >:\n</h2>\n<div\n  id="albumText"\n  class="wikiText"\n>\n  | {{album| file=<output\n    name="image"\n    id="albumImage"\n  ></output>\n  | name=[[<output id="albumName"></output>]] | other=<output id="albumOther"></output> | glyph=<output\n    id="albumGlyphs"\n    name="portalglyphs"\n  ></output>\n  | <output id="albumDiscoverer"></output>}} <output id="albumDesc"></output>\n</div>\n',ge='<button id="albumBtn" class="button is-outlined is-primary"\n\t   data-link="album" data-evt-id="copyButton">\n\t   Copy Album Wikicode\n\t   </button>\n\t   <a class="button is-outlined is-primary" id="albumLink"\n\t   data-link="album" data-evt-id="openAlbumButton">\n\t   Open Album\n\t   </a>',ke=[{element:"copyButton",handler:"click",func:function(){T(this,"albumText")}},{element:"openAlbumButton",handler:"click",func:function(){Te(this)}}],xe=k(ge,{},ke);function Te(e){e.style.pointerEvents="none";const t="function"==typeof o.albumLinkGen?o.albumLinkGen():r.catalogue?r.catalogue:(console.warn("No wiki page provided. Define the function `albumLinkGen()` and add it to the `globalFunctions` object or define a catalogue in the `pageData.catalogue` property!"),void(e.style.pointerEvents=""));t&&F(e,B+t)}function ve(){const e="function"==typeof o.albumItemTypeExternal?o.albumItemTypeExternal():r.type;i.output.album.innerText=e}function Ee(){const e="function"==typeof o.albumDescExternal?o.albumDescExternal():"",t=i.output.albumDesc;t&&(t.innerText=e)}function Ie(){const e=(()=>{if("function"==typeof o.albumDiscovererExternal)return o.albumDiscovererExternal();{const{discovered:e,discoveredlink:t}=r;return t?`wiki=${t}`:`discoverer=${e}`}})(),t=i.output.albumDiscoverer;t&&(t.innerText=e)}function Le(){const e="function"==typeof o.albumNameExternal?o.albumNameExternal():r.name;i.output.albumName.innerText=e}function we(){const e="function"==typeof o.albumOtherExternal?o.albumOtherExternal():"",t=i.output.albumOther;t&&(t.innerText=e)}function Ae(){const e="function"==typeof o.albumTypeExternal?o.albumTypeExternal():"";i.output.albumType.innerText=e}function De(){const e={albumHeaderName:"name",albumImage:"image",albumGlyphs:"portalglyphs"};for(const t in e){i.output[t].innerText=r[e[t]]}}function He(){function e(){De(),Ie(),Le(),we(),Ae(),ve(),Ee()}r.albumInitialised?e():document.addEventListener("albumLoaded",()=>e())}const Ce={output:{album:"album",albumType:"albumType",albumHeaderName:"albumHeaderName",albumImage:"albumImage",albumName:"albumName",albumOther:"albumOther",albumGlyphs:"albumGlyphs",albumDiscoverer:"albumDiscoverer",albumText:"albumText",albumDesc:"albumDesc"}},D=i.output.albumEntry,h=i.output.albumActions;D instanceof HTMLDivElement&&(D.innerHTML=he),h instanceof HTMLDivElement&&(R(xe,h,"afterbegin"),g(Ce),document.dispatchEvent(new Event("albumLoaded")),x("albumInitialised",!0),h.insertAdjacentHTML("afterbegin",'<p style="width:100%" class="has-text-centered mb-3">Please don\'t forget to create an album entry!</p>')),te(i.output.portalglyphButtons,"portalglyphsInput");const Se=ne();x("pageType",Se),ae(),N(),H(),s.uploadShown=!0,s.galleryUploadShown=!0,O(),s.debug||(s.uploadShown=!1,s.galleryUploadShown=!1),b();const j=i.output.output;j.onmousedown=()=>oe();for(const e of Array.from(j.children)){const t=e;t.onmouseup=e=>w(e.target),t.ontouchend=e=>w(e.target)}ie();try{P(i.input.portalglyphsInput,"input")}catch{}x("eventListeners",!0);export{we as a,Ie as b,Le as c,He as d,T as e,Te as f,xe as g,Ee as h,ve as i,Ne as t};
