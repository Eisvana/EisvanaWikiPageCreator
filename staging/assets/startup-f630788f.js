import{a1 as An,a2 as st,a3 as uo,a4 as Pt,a5 as On,a6 as ze,a7 as co,a8 as fo,a9 as po,aa as ho,ab as mo,ac as go,ad as kn,ae as vo,af as bo,ag as yo,ah as Pn,ai as Eo,D as ut,aj as wo,d as Ze,L as _o,ak as So,al as To,h as Qt,K as Do,am as xo,an as j,ao as Io,ap as Co,u as Ht,b as Nn,T as Mn,aq as Ao,t as Oo,ar as ko,g as L,l as O,f as x,as as Po,e as No,U as en,at as Ln,au as Fn,n as Fe,av as Mo,aw as Bn,ax as Rn,s as Gt,q as Hn,v as Gn,m as $t,ay as Ut,az as Xt,aA as Yt,aB as Ee,aC as Wt,aD as A,aE as M,aF as y,aG as Nt,aH as Ie,aI as le,aJ as ue,aK as Te,aL as tn,aM as $e,aN as nn,aO as Lo,aP as $n,aQ as Un,aR as Fo,aS as Bo,aT as Je,aU as ae,aV as on,aW as Ro,aX as Ho,aY as Go,aZ as $o,a_ as Uo,a$ as Xo,b0 as rn,b1 as Yo}from"./links-46c35bcf.js";const Wo="http://www.w3.org/2000/svg",be=typeof document<"u"?document:null,an=be&&be.createElement("template"),jo={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,o)=>{const i=t?be.createElementNS(Wo,e):be.createElement(e,n?{is:n}:void 0);return"select"===e&&o&&null!=o.multiple&&i.setAttribute("multiple",o.multiple),i},createText:e=>be.createTextNode(e),createComment:e=>be.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>be.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,o,i,a){const r=n?n.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),i!==a&&(i=i.nextSibling););else{an.innerHTML=o?`<svg>${e}</svg>`:e;const i=an.content;if(o){const e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},zo=Symbol("_vtc");function qo(e,t,n){const o=e[zo];o&&(t=(t?[t,...o]:[...o]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const jt=Symbol("_vod"),De={beforeMount(e,{value:t},{transition:n}){e[jt]="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):Be(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:o}){!t!=!n&&(o?t?(o.beforeEnter(e),Be(e,!0),o.enter(e)):o.leave(e,(()=>{Be(e,!1)})):Be(e,t))},beforeUnmount(e,{value:t}){Be(e,t)}};function Be(e,t){e.style.display=t?e[jt]:"none"}function Ko(e,t,n){const o=e.style,i=st(n);if(n&&!i){if(t&&!st(t))for(const e in t)null==n[e]&&Mt(o,e,"");for(const e in n)Mt(o,e,n[e])}else{const a=o.display;i?t!==n&&(o.cssText=n):t&&e.removeAttribute("style"),jt in e&&(o.display=a)}}const ln=/\s*!important$/;function Mt(e,t,n){if(ze(n))n.forEach((n=>Mt(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=Vo(e,t);ln.test(n)?e.setProperty(kn(o),n.replace(ln,""),"important"):e[o]=n}}const sn=["Webkit","Moz","ms"],yt={};function Vo(e,t){const n=yt[t];if(n)return n;let o=vo(t);if("filter"!==o&&o in e)return yt[t]=o;o=bo(o);for(let n=0;n<sn.length;n++){const i=sn[n]+o;if(i in e)return yt[t]=i}return t}const un="http://www.w3.org/1999/xlink";function Zo(e,t,n,o,i){if(o&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(un,t.slice(6,t.length)):e.setAttributeNS(un,t,n);else{const o=yo(t);null==n||o&&!Pn(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}function Jo(e,t,n,o,i,a,r){if("innerHTML"===t||"textContent"===t)return o&&r(o,i,a),void(e[t]=n??"");const l=e.tagName;if("value"===t&&"PROGRESS"!==l&&!l.includes("-")){e._value=n;const o=n??"";return("OPTION"===l?e.getAttribute("value"):e.value)!==o&&(e.value=o),void(null==n&&e.removeAttribute(t))}let s=!1;if(""===n||null==n){const o=typeof e[t];"boolean"===o?n=Pn(n):null==n&&"string"===o?(n="",s=!0):"number"===o&&(n=0,s=!0)}try{e[t]=n}catch{}s&&e.removeAttribute(t)}function ye(e,t,n,o){e.addEventListener(t,n,o)}function Qo(e,t,n,o){e.removeEventListener(t,n,o)}const cn=Symbol("_vei");function ei(e,t,n,o,i=null){const a=e[cn]||(e[cn]={}),r=a[t];if(o&&r)r.value=o;else{const[n,l]=ti(t);if(o){ye(e,n,a[t]=ii(o,i),l)}else r&&(Qo(e,n,r,l),a[t]=void 0)}}const dn=/(?:Once|Passive|Capture)$/;function ti(e){let t;if(dn.test(e)){let n;for(t={};n=e.match(dn);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[":"===e[2]?e.slice(3):kn(e.slice(2)),t]}let Et=0;const ni=Promise.resolve(),oi=()=>Et||(ni.then((()=>Et=0)),Et=Date.now());function ii(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();Eo(ri(e,n.value),t,5,[e])};return n.value=e,n.attached=oi(),n}function ri(e,t){if(ze(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const fn=/^on[a-z]/,ai=(e,t,n,o,i=!1,a,r,l,s)=>{"class"===t?qo(e,o,i):"style"===t?Ko(e,n,o):mo(t)?go(t)||ei(e,t,n,o,r):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):li(e,t,o,i))?Jo(e,t,o,a,r,l,s):("true-value"===t?e._trueValue=o:"false-value"===t&&(e._falseValue=o),Zo(e,t,o,i))};function li(e,t,n,o){return o?!!("innerHTML"===t||"textContent"===t||t in e&&fn.test(t)&&An(n)):!("spellcheck"===t||"draggable"===t||"translate"===t||"form"===t||"list"===t&&"INPUT"===e.tagName||"type"===t&&"TEXTAREA"===e.tagName||fn.test(t)&&st(n))&&t in e}const ct=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ze(t)?e=>po(t,e):t};function si(e){e.target.composing=!0}function pn(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ce=Symbol("_assign"),ui={created(e,{modifiers:{lazy:t,trim:n,number:o}},i){e[Ce]=ct(i);const a=o||i.props&&"number"===i.props.type;ye(e,t?"change":"input",(t=>{if(t.target.composing)return;let o=e.value;n&&(o=o.trim()),a&&(o=Pt(o)),e[Ce](o)})),n&&ye(e,"change",(()=>{e.value=e.value.trim()})),t||(ye(e,"compositionstart",si),ye(e,"compositionend",pn),ye(e,"change",pn))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:o,number:i}},a){if(e[Ce]=ct(a),e.composing||document.activeElement===e&&"range"!==e.type&&(n||o&&e.value.trim()===t||(i||"number"===e.type)&&Pt(e.value)===t))return;const r=t??"";e.value!==r&&(e.value=r)}},ci={deep:!0,created(e,{value:t,modifiers:{number:n}},o){const i=On(t);ye(e,"change",(()=>{const t=Array.prototype.filter.call(e.options,(e=>e.selected)).map((e=>n?Pt(dt(e)):dt(e)));e[Ce](e.multiple?i?new Set(t):t:t[0])})),e[Ce]=ct(o)},mounted(e,{value:t}){hn(e,t)},beforeUpdate(e,t,n){e[Ce]=ct(n)},updated(e,{value:t}){hn(e,t)}};function hn(e,t){const n=e.multiple;if(!n||ze(t)||On(t)){for(let o=0,i=e.options.length;o<i;o++){const i=e.options[o],a=dt(i);if(n)ze(t)?i.selected=co(t,a)>-1:i.selected=t.has(a);else if(fo(dt(i),t))return void(e.selectedIndex!==o&&(e.selectedIndex=o))}!n&&-1!==e.selectedIndex&&(e.selectedIndex=-1)}}function dt(e){return"_value"in e?e._value:e.value}const di=["ctrl","shift","alt","meta"],fi={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>di.some((n=>e[`${n}Key`]&&!t.includes(n)))},mn=(e,t)=>(n,...o)=>{for(let e=0;e<t.length;e++){const o=fi[t[e]];if(o&&o(n,t))return}return e(n,...o)},pi=ho({patchProp:ai},jo);let gn;function hi(){return gn||(gn=uo(pi))}const mi=(...e)=>{const t=hi().createApp(...e),{mount:n}=t;return t.mount=e=>{const o=gi(e);if(!o)return;const i=t._component;!An(i)&&!i.render&&!i.template&&(i.template=o.innerHTML),o.innerHTML="";const a=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),a},t};function gi(e){return st(e)?document.querySelector(e):e}const vi=[{element:"nameInput",func:function(){ut()}},{element:"researchTeam",func:function(){wo(),Ze()}},{element:"fileUpload",handler:"change",func:function(){_o(this)}},{element:"portalglyphsInput",func:function(){So(this),To(),ut()}},{element:"discoveredInput",func:function(){Qt("discoveredInput","discoveredlinkInput"),Ze()}},{element:"discoveredlinkInput",func:function(){Qt("discoveredlinkInput","discoveredInput"),Ze()}},{element:"docbyInput",func:function(){Ze()}},{element:"axesInput",handler:"change",func:function(){Do()}},{element:"glyphDeleteButton",handler:"click",func:function(){xo()}},{element:"fileUploadTooltip",handler:"click",func:function(){j.uploadShown=!0}},{element:"galleryFileUploadTooltip",handler:"click",func:function(){j.galleryUploadShown=!0}}];Io(),Co(),Ht(ko),Nn(vi),Mn();const bi={output:{explanationHeading:"explanationHeading",explanationContent:"explanationContent",explanationLink:"explanationLink",explanationWebpImg:"explanationWebpImg",explanationFallbackImg:"explanationFallbackImg"}},vn=L.output.explanation;vn&&(vn.innerHTML=Ao),Ht(bi);const yi=["builderInput","builderlinkInput","ownerInput","ownerlinkInput","discoveredInput","discoveredlinkInput"];for(const e of yi){const t=L.input[e];t&&(t.dataset.player="")}function Ei(){var e,t;const n=document.querySelectorAll(".table .data input, .table .data textarea"),o=document.querySelectorAll(".table .data select"),i=document.getElementsByTagName("output");for(const e of Array.from(n))switch(e.type.toLowerCase()){case"checkbox":e.checked=!1;break;case"radio":const t=document.querySelectorAll('input[type="radio"]:not([checked])'),n=document.querySelectorAll('input[type="radio"][checked]');for(const e of Array.from(t))e.checked=!1;for(const e of Array.from(n))e.checked=!0;break;default:e.value=""}for(const n of Array.from(o))n.value=null==(t=null==(e=n.options)?void 0:e[0])?void 0:t.value;for(const e of Array.from(i))e.innerText="";Po();for(const e in x)delete x[e];const a=document.querySelectorAll(".error");for(const e of Array.from(a))No(e.previousElementSibling);for(const e in en)delete en[e];"function"==typeof O.resetExternal&&O.resetExternal(),Ln(),Fn()}function zt(e,t){var n,o,i,a;e.style.pointerEvents="none";const{innerText:r,dataset:{link:l}}=e;Fe.text=Mo(JSON.stringify(x)),Fe.copy=!0,Fe.link=l;const s=Bn(e);if(s)return e.classList.remove("is-primary"),e.classList.add("is-danger"),e.innerText=s,void setTimeout((()=>{e.classList.remove("is-danger"),e.classList.add("is-primary"),e.innerText=r,e.style.pointerEvents=""}),1500);const c=(null==(a=null==(i=null==(o=null==(n=L)?void 0:n.output)?void 0:o[t])?void 0:i.innerText)?void 0:a.replaceAll("\n\n\n","\n\n"))??t;navigator.clipboard.writeText(c),Fe.copy=!0,Fe.link=l,e.innerText="Copied!",setTimeout((()=>{e.innerText=r,e.style.pointerEvents=""}),1500)}function wi(e){const t=L.output.fullArticle.innerText.replaceAll("\n\n\n","\n\n"),n=x.name,o=e;o.href="data:text/plain,"+encodeURIComponent(t),o.download=n+".txt"}function Xn(e,t=x.name){e.style.pointerEvents="none";Yn(e,Rn+"Special:EditPage/"+t)}function Yn(e,t){const n=Bn(e),o=new RegExp(`[${["#","<",">","[","]","{","|","}"].join("")}]`,"g");if(n){const t=e.innerText;e.removeAttribute("href"),e.className="button is-danger",e.innerText=n,setTimeout((()=>{e.className="button is-outlined is-primary",e.innerText=t,e.style.pointerEvents=""}),1500)}else e.href=t.replace(o," "),e.target="_blank",e.rel="noopener noreferrer",e.style.pointerEvents=""}function oa(){var e;if("function"!=typeof O.redirectPage)return;const t=document.getElementById("reset"),n=["copyRedirect","createRedirect"],o=document.createElement("p");if(o.id="redirectNote",o.classList.add("has-text-centered"),o.innerText="Please create a redirect for your page!",!O.redirectPage())return n.forEach((()=>{const e=t.previousElementSibling;n.includes(e.id)&&e.remove()})),void(null==(e=document.getElementById(o.id))||e.remove());const i=document.createElement("button");i.innerText="Copy Redirect Code",i.type="button";const a=document.createElement("a");a.rel="noopener noreferrer",a.target="_blank",a.innerText="Create Redirect",Nn([{element:i,handler:"click",func:function(){zt(this,`#REDIRECT [[${x.name}]]`)}},{element:a,handler:"click",func:function(){Xn(this,O.redirectPage())}}]);const r=[i,a];for(let e=0;e<r.length;e++){const o=r[e],i=n[e];if(document.getElementById(i))return;o.classList.add("button","is-outlined","is-primary"),o.id=i,o.dataset.link="redirect",t.insertAdjacentElement("beforebegin",o)}t.parentElement.insertAdjacentElement("beforebegin",o)}Oo();const _i='\n<button class="button is-outlined is-primary" id="copy" type="button" data-link="page" data-evt-id="copyButton">Copy Wikicode</button>\n<a class="button is-outlined is-primary" id="download" data-evt-id="downloadButton">Download File</a>\n<a class="button is-outlined is-primary" href="https://nomanssky.fandom.com/wiki/Special:Upload?multiple=true" id="uploadLink" rel="noopener noreferrer" target="_blank">Upload Pictures</a>\n<a class="button is-outlined is-primary" id="create" data-link="page" data-evt-id="createPageButton">Create Page</a>\n<button class="button is-warning" id="reset" type="reset" data-evt-id="resetButton">Reset Inputs</button>',Si=[{element:"copyButton",handler:"click",func:function(){zt(this,"fullArticle")}},{element:"downloadButton",handler:"click",func:function(){wi(this)}},{element:"createPageButton",handler:"click",func:function(){Xn(this)}},{element:"resetButton",handler:"click",func:()=>Ei()}],Ti=Gt(_i,{},Si),Di='<p class="has-text-centered">You must copy the code first, then paste it into the wiki page.<br>Also don\'t forget to upload any images you have put here.</p>',qt=L.output.actions;qt.innerHTML="",Hn(Ti,qt,"afterbegin"),qt.insertAdjacentHTML("beforebegin",Di);const xi='\n<label style="display:flex; gap: .3rem"><input class="checkbox" type="checkbox" id="skipCheck" data-evt-id="skipCheck">Enable debug (no checks, no popups)</label>;\n<button style="margin: 0 1rem" class="button is-danger is-small" id="clearCache" data-evt-id="clearCache">Clear Localstorage</button>',Ii=[{element:"clearCache",handler:"click",func:()=>localStorage.clear()},{element:"skipCheck",handler:"change",func:function(){const e=this.checked;j.debug=e,j.uploadShown=e,j.galleryUploadShown=e,document.documentElement.dataset.debug=e.toString(),ut()}}];L.output.actions,Gt(xi,{},Ii),Object.defineProperty(j,"debug",{configurable:!1,writable:!1,value:!1});const wt=document.getElementById("skipCheck");wt&&new URLSearchParams(window.location.search).has("debug")&&(wt.checked=!0,Gn(wt,"change"));const Ci='<h2 class="title is-5 has-text-left has-text-weight-bold mb-2">Eisvana \x3c!-- //NOSONAR\n\t(this is fine since this snippet is inserted somewhere else)--\x3e\n\t<output id="album" name="type"></output> <output id="albumType"></output> entry for <output id="albumHeaderName"\n\t\tname="name"></output>:\n</h2>\n<div id="albumText" class="wikiText">\n\t| {{album| file=<output name="image" id="albumImage"></output> | name=[[<output id="albumName"></output>]]\n\t| other=<output id="albumOther"></output> | glyph=<output id="albumGlyphs" name="portalglyphs"></output> |\n\t<output id="albumDiscoverer"></output>}} <output id="albumDesc"></output>\n</div>',Ai='<button id="albumBtn" class="button is-outlined is-primary"\n\t   data-link="album" data-evt-id="copyButton">\n\t   Copy Album Wikicode\n\t   </button>\n\t   <a class="button is-outlined is-primary" id="albumLink"\n\t   data-link="album" data-evt-id="openAlbumButton">\n\t   Open Album\n\t   </a>',Oi=[{element:"copyButton",handler:"click",func:function(){zt(this,"albumText")}},{element:"openAlbumButton",handler:"click",func:function(){Pi(this)}}],ki=Gt(Ai,{},Oi);function Pi(e){e.style.pointerEvents="none";const t="function"==typeof O.albumLinkGen?O.albumLinkGen():x.catalogue?x.catalogue:(console.warn("No wiki page provided. Define the function `albumLinkGen()` and add it to the `globalFunctions` object or define a catalogue in the `pageData.catalogue` property!"),void(e.style.pointerEvents=""));t&&Yn(e,Rn+t)}function Ni(){const e="function"==typeof O.albumItemTypeExternal?O.albumItemTypeExternal():x.type;L.output.album.innerText=e}function Mi(){const e="function"==typeof O.albumDescExternal?O.albumDescExternal():"",t=L.output.albumDesc;t&&(t.innerText=e)}function Li(){const e=(()=>{if("function"==typeof O.albumDiscovererExternal)return O.albumDiscovererExternal();{const{discovered:e,discoveredlink:t}=x;return t?`wiki=${t}`:`discoverer=${e}`}})(),t=L.output.albumDiscoverer;t&&(t.innerText=e)}function Fi(){const e="function"==typeof O.albumNameExternal?O.albumNameExternal():x.name;L.output.albumName.innerText=e}function Bi(){const e="function"==typeof O.albumOtherExternal?O.albumOtherExternal():"",t=L.output.albumOther;t&&(t.innerText=e)}function Ri(){const e="function"==typeof O.albumTypeExternal?O.albumTypeExternal():"";L.output.albumType.innerText=e}function Hi(){const e={albumHeaderName:"name",albumImage:"image",albumGlyphs:"portalglyphs"};for(const t in e){L.output[t].innerText=x[e[t]]}}function ia(){function e(){Hi(),Li(),Fi(),Bi(),Ri(),Ni(),Mi()}x.albumInitialised?e():document.addEventListener("albumLoaded",(()=>e()))}const Gi={output:{album:"album",albumType:"albumType",albumHeaderName:"albumHeaderName",albumImage:"albumImage",albumName:"albumName",albumOther:"albumOther",albumGlyphs:"albumGlyphs",albumDiscoverer:"albumDiscoverer",albumText:"albumText",albumDesc:"albumDesc"}},bn=L.output.albumEntry,_t=L.output.albumActions;if(bn instanceof HTMLDivElement&&(bn.innerHTML=Ci),_t instanceof HTMLDivElement){Hn(ki,_t,"afterbegin"),Ht(Gi),document.dispatchEvent(new Event("albumLoaded")),$t("albumInitialised",!0);const e='<p style="width:100%" class="has-text-centered mb-3">Please don\'t forget to create an album entry!</p>';_t.insertAdjacentHTML("afterbegin",e)}
/**!
 * Sortable 1.15.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){$i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function te(){return te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},te.apply(this,arguments)}function Ui(e,t){if(null==e)return{};var n,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&(i[n]=e[n]);return i}function Xi(e,t){if(null==e)return{};var n,o,i=Ui(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Yi="1.15.0";function ee(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var ne=ee(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),qe=ee(/Edge/i),En=ee(/firefox/i),Ue=ee(/safari/i)&&!ee(/chrome/i)&&!ee(/android/i),Wn=ee(/iP(ad|od|hone)/i),jn=ee(/chrome/i)&&ee(/android/i),zn={capture:!1,passive:!1};function _(e,t,n){e.addEventListener(t,n,!ne&&zn)}function w(e,t,n){e.removeEventListener(t,n,!ne&&zn)}function ft(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Wi(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function V(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&ft(e,t):ft(e,t))||o&&e===n)return e;if(e===n)break}while(e=Wi(e))}return null}var Xe,wn=/\s+/g;function X(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(wn," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(wn," ")}}function g(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];!(t in o)&&-1===t.indexOf("webkit")&&(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function Ae(e,t){var n="";if("string"==typeof e)n=e;else do{var o=g(e,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function qn(e,t,n){if(e){var o=e.getElementsByTagName(t),i=0,a=o.length;if(n)for(;i<a;i++)n(o[i],i);return o}return[]}function Z(){return document.scrollingElement||document.documentElement}function N(e,t,n,o,i){if(e.getBoundingClientRect||e===window){var a,r,l,s,c,u,d;if(e!==window&&e.parentNode&&e!==Z()?(r=(a=e.getBoundingClientRect()).top,l=a.left,s=a.bottom,c=a.right,u=a.height,d=a.width):(r=0,l=0,s=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!ne))do{if(i&&i.getBoundingClientRect&&("none"!==g(i,"transform")||n&&"static"!==g(i,"position"))){var f=i.getBoundingClientRect();r-=f.top+parseInt(g(i,"border-top-width")),l-=f.left+parseInt(g(i,"border-left-width")),s=r+a.height,c=l+a.width;break}}while(i=i.parentNode);if(o&&e!==window){var p=Ae(i||e),h=p&&p.a,m=p&&p.d;p&&(s=(r/=m)+(u/=m),c=(l/=h)+(d/=h))}return{top:r,left:l,bottom:s,right:c,width:d,height:u}}}function _n(e,t,n){for(var o=de(e,!0),i=N(e)[t];o;){var a=N(o)[n];if(!("top"===n||"left"===n?i>=a:i<=a))return o;if(o===Z())break;o=de(o,!1)}return!1}function Oe(e,t,n,o){for(var i=0,a=0,r=e.children;a<r.length;){if("none"!==r[a].style.display&&r[a]!==v.ghost&&(o||r[a]!==v.dragged)&&V(r[a],n.draggable,e,!1)){if(i===t)return r[a];i++}a++}return null}function Kt(e,t){for(var n=e.lastElementChild;n&&(n===v.ghost||"none"===g(n,"display")||t&&!ft(n,t));)n=n.previousElementSibling;return n||null}function z(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"!==e.nodeName.toUpperCase()&&e!==v.clone&&(!t||ft(e,t))&&n++;return n}function Sn(e){var t=0,n=0,o=Z();if(e)do{var i=Ae(e),a=i.a,r=i.d;t+=e.scrollLeft*a,n+=e.scrollTop*r}while(e!==o&&(e=e.parentNode));return[t,n]}function ji(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n);return-1}function de(e,t){if(!e||!e.getBoundingClientRect)return Z();var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=g(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return Z();if(o||t)return n;o=!0}}}while(n=n.parentNode);return Z()}function zi(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function St(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function Kn(e,t){return function(){if(!Xe){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),Xe=setTimeout((function(){Xe=void 0}),t)}}}function qi(){clearTimeout(Xe),Xe=void 0}function Vn(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Zn(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}var W="Sortable"+(new Date).getTime();function Ki(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==g(e,"display")&&e!==v.ghost){t.push({target:e,rect:N(e)});var n=J({},t[t.length-1].rect);if(e.thisAnimationDuration){var o=Ae(e,!0);o&&(n.top-=o.f,n.left-=o.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(ji(t,{target:e}),1)},animateAll:function(n){var o=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var i=!1,a=0;t.forEach((function(e){var t=0,n=e.target,r=n.fromRect,l=N(n),s=n.prevFromRect,c=n.prevToRect,u=e.rect,d=Ae(n,!0);d&&(l.top-=d.f,l.left-=d.e),n.toRect=l,n.thisAnimationDuration&&St(s,l)&&!St(r,l)&&(u.top-l.top)/(u.left-l.left)==(r.top-l.top)/(r.left-l.left)&&(t=Zi(u,s,c,o.options)),St(l,r)||(n.prevFromRect=r,n.prevToRect=l,t||(t=o.options.animation),o.animate(n,u,l,t)),t&&(i=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){"function"==typeof n&&n()}),a):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,o){if(o){g(e,"transition",""),g(e,"transform","");var i=Ae(this.el),a=i&&i.a,r=i&&i.d,l=(t.left-n.left)/(a||1),s=(t.top-n.top)/(r||1);e.animatingX=!!l,e.animatingY=!!s,g(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=Vi(e),g(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),g(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){g(e,"transition",""),g(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}}function Vi(e){return e.offsetWidth}function Zi(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var we=[],Tt={initializeByDefault:!0},Ke={mount:function(e){for(var t in Tt)Tt.hasOwnProperty(t)&&!(t in e)&&(e[t]=Tt[t]);we.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),we.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var i=e+"Global";we.forEach((function(o){t[o.pluginName]&&(t[o.pluginName][i]&&t[o.pluginName][i](J({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](J({sortable:t},n)))}))},initializePlugins:function(e,t,n,o){for(var i in we.forEach((function(o){var i=o.pluginName;if(e.options[i]||o.initializeByDefault){var a=new o(e,t,e.options);a.sortable=e,a.options=e.options,e[i]=a,te(n,a.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);typeof a<"u"&&(e.options[i]=a)}},getEventProperties:function(e,t){var n={};return we.forEach((function(o){"function"==typeof o.eventProperties&&te(n,o.eventProperties.call(t[o.pluginName],e))})),n},modifyOption:function(e,t,n){var o;return we.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[t]&&(o=i.optionListeners[t].call(e[i.pluginName],n))})),o}};function Ji(e){var t=e.sortable,n=e.rootEl,o=e.name,i=e.targetEl,a=e.cloneEl,r=e.toEl,l=e.fromEl,s=e.oldIndex,c=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,h=e.extraEventProperties;if(t=t||n&&n[W]){var m,g=t.options,v="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||ne||qe?(m=document.createEvent("Event")).initEvent(o,!0,!0):m=new CustomEvent(o,{bubbles:!0,cancelable:!0}),m.to=r||n,m.from=l||n,m.item=i||n,m.clone=a,m.oldIndex=s,m.newIndex=c,m.oldDraggableIndex=u,m.newDraggableIndex=d,m.originalEvent=f,m.pullMode=p?p.lastPutMode:void 0;var b=J(J({},h),Ke.getEventProperties(o,t));for(var y in b)m[y]=b[y];n&&n.dispatchEvent(m),g[v]&&g[v].call(t,m)}}var Qi=["evt"],G=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.evt,i=Xi(n,Qi);Ke.pluginEvent.bind(v)(e,t,J({dragEl:f,parentEl:C,ghostEl:b,rootEl:D,nextEl:ve,lastDownEl:it,cloneEl:I,cloneHidden:ce,dragStarted:Re,putSortable:F,activeSortable:v.active,originalEvent:o,oldIndex:xe,oldDraggableIndex:Ye,newIndex:Y,newDraggableIndex:se,hideGhostForTarget:to,unhideGhostForTarget:no,cloneNowHidden:function(){ce=!0},cloneNowShown:function(){ce=!1},dispatchSortableEvent:function(e){H({sortable:t,name:e,originalEvent:o})}},i))};function H(e){Ji(J({putSortable:F,cloneEl:I,targetEl:f,rootEl:D,oldIndex:xe,oldDraggableIndex:Ye,newIndex:Y,newDraggableIndex:se},e))}var f,C,b,D,ve,it,I,ce,xe,Y,Ye,se,Qe,F,me,q,Dt,xt,Tn,Dn,Re,_e,We,rt,B,Se=!1,pt=!1,ht=[],je=!1,et=!1,It=[],Lt=!1,mt=[],vt=typeof document<"u",tt=Wn,xn=qe||ne?"cssFloat":"float",er=vt&&!jn&&!Wn&&"draggable"in document.createElement("div"),Jn=function(){if(vt){if(ne)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Qn=function(e,t){var n=g(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Oe(e,0,t),a=Oe(e,1,t),r=i&&g(i),l=a&&g(a),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+N(i).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+N(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&r.float&&"none"!==r.float){var u="left"===r.float?"left":"right";return!a||"both"!==l.clear&&l.clear!==u?"horizontal":"vertical"}return i&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||s>=o&&"none"===n[xn]||a&&"none"===n[xn]&&s+c>o)?"vertical":"horizontal"},tr=function(e,t,n){var o=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,r=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return o===r||i===l||o+a/2===r+s/2},nr=function(e,t){var n;return ht.some((function(o){var i=o[W].options.emptyInsertThreshold;if(i&&!Kt(o)){var a=N(o),r=e>=a.left-i&&e<=a.right+i,l=t>=a.top-i&&t<=a.bottom+i;if(r&&l)return n=o}})),n},eo=function(e){function t(e,n){return function(o,i,a,r){var l=o.options.group.name&&i.options.group.name&&o.options.group.name===i.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(o,i,a,r),n)(o,i,a,r);var s=(n?o:i).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},o=e.group;(!o||"object"!=ot(o))&&(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},to=function(){!Jn&&b&&g(b,"display","none")},no=function(){!Jn&&b&&g(b,"display","")};vt&&!jn&&document.addEventListener("click",(function(e){if(pt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),pt=!1,!1}),!0);var ge=function(e){if(f){e=e.touches?e.touches[0]:e;var t=nr(e.clientX,e.clientY);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[W]._onDragOver(n)}}},or=function(e){f&&f.parentNode[W]._isOutsideThisEl(e.target)};function v(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=te({},t),e[W]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Qn(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==v.supportPointer&&"PointerEvent"in window&&!Ue,emptyInsertThreshold:5};for(var o in Ke.initializePlugins(this,e,n),n)!(o in t)&&(t[o]=n[o]);for(var i in eo(t),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&er,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?_(e,"pointerdown",this._onTapStart):(_(e,"mousedown",this._onTapStart),_(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(_(e,"dragover",this),_(e,"dragenter",this)),ht.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),te(this,Ki())}function ir(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function nt(e,t,n,o,i,a,r,l){var s,c,u=e[W],d=u.options.onMove;return!window.CustomEvent||ne||qe?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=o,s.related=i||t,s.relatedRect=a||N(t),s.willInsertAfter=l,s.originalEvent=r,e.dispatchEvent(s),d&&(c=d.call(u,s,r)),c}function Ct(e){e.draggable=!1}function rr(){Lt=!1}function ar(e,t,n){var o=N(Oe(n.el,0,n.options,!0));return t?e.clientX<o.left-10||e.clientY<o.top&&e.clientX<o.right:e.clientY<o.top-10||e.clientY<o.bottom&&e.clientX<o.left}function lr(e,t,n){var o=N(Kt(n.el,n.options.draggable));return t?e.clientX>o.right+10||e.clientX<=o.right&&e.clientY>o.bottom&&e.clientX>=o.left:e.clientX>o.right&&e.clientY>o.top||e.clientX<=o.right&&e.clientY>o.bottom+10}function sr(e,t,n,o,i,a,r,l){var s=o?e.clientY:e.clientX,c=o?n.height:n.width,u=o?n.top:n.left,d=o?n.bottom:n.right,f=!1;if(!r)if(l&&rt<c*i){if(!je&&(1===We?s>u+c*a/2:s<d-c*a/2)&&(je=!0),je)f=!0;else if(1===We?s<u+rt:s>d-rt)return-We}else if(s>u+c*(1-i)/2&&s<d-c*(1-i)/2)return ur(t);return(f=f||r)&&(s<u+c*a/2||s>d-c*a/2)?s>u+c/2?1:-1:0}function ur(e){return z(f)<z(e)?1:-1}function cr(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function dr(e){mt.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&mt.push(o)}}function at(e){return setTimeout(e,0)}function Ft(e){return clearTimeout(e)}v.prototype={constructor:v,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(_e=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,f):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,i=o.preventOnFilter,a=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(r||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=o.filter;if(dr(n),!f&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||o.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!Ue||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=V(l,o.draggable,n,!1))&&l.animated||it===l)){if(xe=z(l),Ye=z(l,o.draggable),"function"==typeof c){if(c.call(this,e,l,this))return H({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),G("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(o){if(o=V(s,o.trim(),n,!1))return H({sortable:t,rootEl:o,name:"filter",targetEl:l,fromEl:n,toEl:n}),G("filter",t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());o.handle&&!V(s,o.handle,n,!1)||this._prepareDragStart(e,r,l)}}},_prepareDragStart:function(e,t,n){var o,i=this,a=i.el,r=i.options,l=a.ownerDocument;if(n&&!f&&n.parentNode===a){var s=N(n);if(D=a,C=(f=n).parentNode,ve=f.nextSibling,it=n,Qe=r.group,v.dragged=f,me={target:f,clientX:(t||e).clientX,clientY:(t||e).clientY},Tn=me.clientX-s.left,Dn=me.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,f.style["will-change"]="all",o=function(){G("delayEnded",i,{evt:e}),v.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!En&&i.nativeDraggable&&(f.draggable=!0),i._triggerDragStart(e,t),H({sortable:i,name:"choose",originalEvent:e}),X(f,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){qn(f,e.trim(),Ct)})),_(l,"dragover",ge),_(l,"mousemove",ge),_(l,"touchmove",ge),_(l,"mouseup",i._onDrop),_(l,"touchend",i._onDrop),_(l,"touchcancel",i._onDrop),En&&this.nativeDraggable&&(this.options.touchStartThreshold=4,f.draggable=!0),G("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(qe||ne))o();else{if(v.eventCanceled)return void this._onDrop();_(l,"mouseup",i._disableDelayedDrag),_(l,"touchend",i._disableDelayedDrag),_(l,"touchcancel",i._disableDelayedDrag),_(l,"mousemove",i._delayedDragTouchMoveHandler),_(l,"touchmove",i._delayedDragTouchMoveHandler),r.supportPointer&&_(l,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(o,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){f&&Ct(f),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;w(e,"mouseup",this._disableDelayedDrag),w(e,"touchend",this._disableDelayedDrag),w(e,"touchcancel",this._disableDelayedDrag),w(e,"mousemove",this._delayedDragTouchMoveHandler),w(e,"touchmove",this._delayedDragTouchMoveHandler),w(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?_(document,"pointermove",this._onTouchMove):_(document,t?"touchmove":"mousemove",this._onTouchMove):(_(f,"dragend",this),_(D,"dragstart",this._onDragStart));try{document.selection?at((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Se=!1,D&&f){G("dragStarted",this,{evt:t}),this.nativeDraggable&&_(document,"dragover",or);var n=this.options;!e&&X(f,n.dragClass,!1),X(f,n.ghostClass,!0),v.active=this,e&&this._appendGhost(),H({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(q){this._lastX=q.clientX,this._lastY=q.clientY,to();for(var e=document.elementFromPoint(q.clientX,q.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(q.clientX,q.clientY))!==t;)t=e;if(f.parentNode[W]._isOutsideThisEl(e),t)do{if(t[W]){if(t[W]._onDragOver({clientX:q.clientX,clientY:q.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);no()}},_onTouchMove:function(e){if(me){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,i=e.touches?e.touches[0]:e,a=b&&Ae(b,!0),r=b&&a&&a.a,l=b&&a&&a.d,s=tt&&B&&Sn(B),c=(i.clientX-me.clientX+o.x)/(r||1)+(s?s[0]-It[0]:0)/(r||1),u=(i.clientY-me.clientY+o.y)/(l||1)+(s?s[1]-It[1]:0)/(l||1);if(!v.active&&!Se){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(b){a?(a.e+=c-(Dt||0),a.f+=u-(xt||0)):a={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");g(b,"webkitTransform",d),g(b,"mozTransform",d),g(b,"msTransform",d),g(b,"transform",d),Dt=c,xt=u,q=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!b){var e=this.options.fallbackOnBody?document.body:D,t=N(f,!0,tt,!0,e),n=this.options;if(tt){for(B=e;"static"===g(B,"position")&&"none"===g(B,"transform")&&B!==document;)B=B.parentNode;B!==document.body&&B!==document.documentElement?(B===document&&(B=Z()),t.top+=B.scrollTop,t.left+=B.scrollLeft):B=Z(),It=Sn(B)}X(b=f.cloneNode(!0),n.ghostClass,!1),X(b,n.fallbackClass,!0),X(b,n.dragClass,!0),g(b,"transition",""),g(b,"transform",""),g(b,"box-sizing","border-box"),g(b,"margin",0),g(b,"top",t.top),g(b,"left",t.left),g(b,"width",t.width),g(b,"height",t.height),g(b,"opacity","0.8"),g(b,"position",tt?"absolute":"fixed"),g(b,"zIndex","100000"),g(b,"pointerEvents","none"),v.ghost=b,e.appendChild(b),g(b,"transform-origin",Tn/parseInt(b.style.width)*100+"% "+Dn/parseInt(b.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,i=n.options;G("dragStart",this,{evt:e}),v.eventCanceled?this._onDrop():(G("setupClone",this),v.eventCanceled||((I=Zn(f)).removeAttribute("id"),I.draggable=!1,I.style["will-change"]="",this._hideClone(),X(I,this.options.chosenClass,!1),v.clone=I),n.cloneId=at((function(){G("clone",n),!v.eventCanceled&&(n.options.removeCloneOnHide||D.insertBefore(I,f),n._hideClone(),H({sortable:n,name:"clone"}))})),!t&&X(f,i.dragClass,!0),t?(pt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(w(document,"mouseup",n._onDrop),w(document,"touchend",n._onDrop),w(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",i.setData&&i.setData.call(n,o,f)),_(document,"drop",n),g(f,"transform","translateZ(0)")),Se=!0,n._dragStartId=at(n._dragStarted.bind(n,t,e)),_(document,"selectstart",n),Re=!0,Ue&&g(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,o,i,a=this.el,r=e.target,l=this.options,s=l.group,c=v.active,u=Qe===s,d=l.sort,p=F||c,h=this,m=!1;if(!Lt){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),r=V(r,l.draggable,a,!0),B("dragOver"),v.eventCanceled)return m;if(f.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||h._ignoreWhileAnimating===r)return j(!1);if(pt=!1,c&&!l.disabled&&(u?d||(o=C!==D):F===this||(this.lastPutMode=Qe.checkPull(this,c,f,e))&&s.checkPut(this,c,f,e))){if(i="vertical"===this._getDirection(e,r),t=N(f),B("dragOverValid"),v.eventCanceled)return m;if(o)return C=D,R(),this._hideClone(),B("revert"),v.eventCanceled||(ve?D.insertBefore(f,ve):D.appendChild(f)),j(!0);var y=Kt(a,l.draggable);if(!y||lr(e,i,this)&&!y.animated){if(y===f)return j(!1);if(y&&a===e.target&&(r=y),r&&(n=N(r)),!1!==nt(D,a,f,t,r,n,e,!!r))return R(),y&&y.nextSibling?a.insertBefore(f,y.nextSibling):a.appendChild(f),C=a,U(),j(!0)}else if(y&&ar(e,i,this)){var w=Oe(a,0,l,!0);if(w===f)return j(!1);if(n=N(r=w),!1!==nt(D,a,f,t,r,n,e,!1))return R(),a.insertBefore(f,w),C=a,U(),j(!0)}else if(r.parentNode===a){n=N(r);var E,x,_,T=f.parentNode!==a,S=!tr(f.animated&&f.toRect||t,r.animated&&r.toRect||n,i),k=i?"top":"left",I=_n(r,"top","top")||_n(f,"top","top"),A=I?I.scrollTop:void 0;if(_e!==r&&(x=n[k],je=!1,et=!S&&l.invertSwap||T),0!==(E=sr(e,r,n,i,S?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,et,_e===r))){var O=z(f);do{O-=E,_=C.children[O]}while(_&&("none"===g(_,"display")||_===b))}if(0===E||_===r)return j(!1);_e=r,We=E;var M=r.nextElementSibling,L=!1,P=nt(D,a,f,t,r,n,e,L=1===E);if(!1!==P)return(1===P||-1===P)&&(L=1===P),Lt=!0,setTimeout(rr,30),R(),L&&!M?a.appendChild(f):r.parentNode.insertBefore(f,L?M:r),I&&Vn(I,0,A-I.scrollTop),C=f.parentNode,void 0!==x&&!et&&(rt=Math.abs(x-N(r)[k])),U(),j(!0)}if(a.contains(f))return j(!1)}return!1}function B(l,s){G(l,h,J({evt:e,isOwner:u,axis:i?"vertical":"horizontal",revert:o,dragRect:t,targetRect:n,canSort:d,fromSortable:p,target:r,completed:j,onMove:function(n,o){return nt(D,a,f,t,n,N(n),e,o)},changed:U},s))}function R(){B("dragOverAnimationCapture"),h.captureAnimationState(),h!==p&&p.captureAnimationState()}function j(t){return B("dragOverCompleted",{insertion:t}),t&&(u?c._hideClone():c._showClone(h),h!==p&&(X(f,F?F.options.ghostClass:c.options.ghostClass,!1),X(f,l.ghostClass,!0)),F!==h&&h!==v.active?F=h:h===v.active&&F&&(F=null),p===h&&(h._ignoreWhileAnimating=r),h.animateAll((function(){B("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==p&&(p.animateAll(),p._ignoreWhileAnimating=null)),(r===f&&!f.animated||r===a&&!r.animated)&&(_e=null),!l.dragoverBubble&&!e.rootEl&&r!==document&&(f.parentNode[W]._isOutsideThisEl(e.target),!t&&ge(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function U(){Y=z(f),se=z(f,l.draggable),H({sortable:h,name:"change",toEl:a,newIndex:Y,newDraggableIndex:se,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){w(document,"mousemove",this._onTouchMove),w(document,"touchmove",this._onTouchMove),w(document,"pointermove",this._onTouchMove),w(document,"dragover",ge),w(document,"mousemove",ge),w(document,"touchmove",ge)},_offUpEvents:function(){var e=this.el.ownerDocument;w(e,"mouseup",this._onDrop),w(e,"touchend",this._onDrop),w(e,"pointerup",this._onDrop),w(e,"touchcancel",this._onDrop),w(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;Y=z(f),se=z(f,n.draggable),G("drop",this,{evt:e}),C=f&&f.parentNode,Y=z(f),se=z(f,n.draggable),v.eventCanceled||(Se=!1,et=!1,je=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ft(this.cloneId),Ft(this._dragStartId),this.nativeDraggable&&(w(document,"drop",this),w(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ue&&g(document.body,"user-select",""),g(f,"transform",""),e&&(Re&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),b&&b.parentNode&&b.parentNode.removeChild(b),(D===C||F&&"clone"!==F.lastPutMode)&&I&&I.parentNode&&I.parentNode.removeChild(I),f&&(this.nativeDraggable&&w(f,"dragend",this),Ct(f),f.style["will-change"]="",Re&&!Se&&X(f,F?F.options.ghostClass:this.options.ghostClass,!1),X(f,this.options.chosenClass,!1),H({sortable:this,name:"unchoose",toEl:C,newIndex:null,newDraggableIndex:null,originalEvent:e}),D!==C?(Y>=0&&(H({rootEl:C,name:"add",toEl:C,fromEl:D,originalEvent:e}),H({sortable:this,name:"remove",toEl:C,originalEvent:e}),H({rootEl:C,name:"sort",toEl:C,fromEl:D,originalEvent:e}),H({sortable:this,name:"sort",toEl:C,originalEvent:e})),F&&F.save()):Y!==xe&&Y>=0&&(H({sortable:this,name:"update",toEl:C,originalEvent:e}),H({sortable:this,name:"sort",toEl:C,originalEvent:e})),v.active&&((null==Y||-1===Y)&&(Y=xe,se=Ye),H({sortable:this,name:"end",toEl:C,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){G("nulling",this),D=f=C=b=ve=I=it=ce=me=q=Re=Y=se=xe=Ye=_e=We=F=Qe=v.dragged=v.ghost=v.clone=v.active=null,mt.forEach((function(e){e.checked=!0})),mt.length=Dt=xt=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":f&&(this._onDragOver(e),ir(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,i=n.length,a=this.options;o<i;o++)V(e=n[o],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||cr(e));return t},sort:function(e,t){var n={},o=this.el;this.toArray().forEach((function(e,t){var i=o.children[t];V(i,this.options.draggable,o,!1)&&(n[e]=i)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(o.removeChild(n[e]),o.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return V(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var o=Ke.modifyOption(this,e,t);n[e]=typeof o<"u"?o:t,"group"===e&&eo(n)},destroy:function(){G("destroy",this);var e=this.el;e[W]=null,w(e,"mousedown",this._onTapStart),w(e,"touchstart",this._onTapStart),w(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(w(e,"dragover",this),w(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),ht.splice(ht.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ce){if(G("hideClone",this),v.eventCanceled)return;g(I,"display","none"),this.options.removeCloneOnHide&&I.parentNode&&I.parentNode.removeChild(I),ce=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(ce){if(G("showClone",this),v.eventCanceled)return;f.parentNode!=D||this.options.group.revertClone?ve?D.insertBefore(I,ve):D.appendChild(I):D.insertBefore(I,f),this.options.group.revertClone&&this.animate(f,I),g(I,"display",""),ce=!1}}else this._hideClone()}},vt&&_(document,"touchmove",(function(e){(v.active||Se)&&e.cancelable&&e.preventDefault()})),v.utils={on:_,off:w,css:g,find:qn,is:function(e,t){return!!V(e,t,e,!1)},extend:zi,throttle:Kn,closest:V,toggleClass:X,clone:Zn,index:z,nextTick:at,cancelNextTick:Ft,detectDirection:Qn,getChild:Oe},v.get=function(e){return e[W]},v.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(v.utils=J(J({},v.utils),e.utils)),Ke.mount(e)}))},v.create=function(e,t){return new v(e,t)},v.version=Yi;var He,Bt,At,Ot,gt,Ge,k=[],Rt=!1;function fr(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?_(document,"dragover",this._handleAutoScroll):this.options.supportPointer?_(document,"pointermove",this._handleFallbackAutoScroll):t.touches?_(document,"touchmove",this._handleFallbackAutoScroll):_(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):(w(document,"pointermove",this._handleFallbackAutoScroll),w(document,"touchmove",this._handleFallbackAutoScroll),w(document,"mousemove",this._handleFallbackAutoScroll)),In(),lt(),qi()},nulling:function(){gt=Bt=He=Rt=Ge=At=Ot=null,k.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,o=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(o,i);if(gt=e,t||this.options.forceAutoScrollFallback||qe||ne||Ue){kt(e,this.options,a,t);var r=de(a,!0);Rt&&(!Ge||o!==At||i!==Ot)&&(Ge&&In(),Ge=setInterval((function(){var a=de(document.elementFromPoint(o,i),!0);a!==r&&(r=a,lt()),kt(e,n.options,a,t)}),10),At=o,Ot=i)}else{if(!this.options.bubbleScroll||de(a,!0)===Z())return void lt();kt(e,this.options,de(a,!1),!1)}}},te(e,{pluginName:"scroll",initializeByDefault:!0})}function lt(){k.forEach((function(e){clearInterval(e.pid)})),k=[]}function In(){clearInterval(Ge)}var kt=Kn((function(e,t,n,o){if(t.scroll){var i,a=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=Z(),u=!1;Bt!==n&&(Bt=n,lt(),He=t.scroll,i=t.scrollFn,!0===He&&(He=de(n,!0)));var d=0,f=He;do{var p=f,h=N(p),m=h.top,b=h.bottom,y=h.left,w=h.right,E=h.width,x=h.height,_=void 0,T=void 0,D=p.scrollWidth,S=p.scrollHeight,C=g(p),I=p.scrollLeft,A=p.scrollTop;p===c?(_=E<D&&("auto"===C.overflowX||"scroll"===C.overflowX||"visible"===C.overflowX),T=x<S&&("auto"===C.overflowY||"scroll"===C.overflowY||"visible"===C.overflowY)):(_=E<D&&("auto"===C.overflowX||"scroll"===C.overflowX),T=x<S&&("auto"===C.overflowY||"scroll"===C.overflowY));var O=_&&(Math.abs(w-a)<=l&&I+E<D)-(Math.abs(y-a)<=l&&!!I),M=T&&(Math.abs(b-r)<=l&&A+x<S)-(Math.abs(m-r)<=l&&!!A);if(!k[d])for(var L=0;L<=d;L++)k[L]||(k[L]={});(k[d].vx!=O||k[d].vy!=M||k[d].el!==p)&&(k[d].el=p,k[d].vx=O,k[d].vy=M,clearInterval(k[d].pid),(0!=O||0!=M)&&(u=!0,k[d].pid=setInterval(function(){o&&0===this.layer&&v.active._onTouchMove(gt);var t=k[this.layer].vy?k[this.layer].vy*s:0,n=k[this.layer].vx?k[this.layer].vx*s:0;"function"==typeof i&&"continue"!==i.call(v.dragged.parentNode[W],n,t,e,gt,k[this.layer].el)||Vn(k[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==c&&(f=de(f,!1)));Rt=u}}),30),oo=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,r=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||i;r();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(c.clientX,c.clientY);l(),s&&!s.el.contains(u)&&(a("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function Vt(){}function Zt(){}Vt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=Oe(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:oo},te(Vt,{pluginName:"revertOnSpill"}),Zt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:oo},te(Zt,{pluginName:"removeOnSpill"}),v.mount(new fr),v.mount(Zt,Vt);const pr="/EisvanaWikiPageCreator/staging/assets/icons/arrow.svg",hr={class:"gallery-item"},mr=["href"],gr=["src","alt"],vr={class:"gallery-meta"},br={style:{"word-break":"break-all"}},yr=y("span",{class:"has-text-weight-bold"},"Name: ",-1),Er=["value"],wr={class:"controlButtons"},_r={class:"handle",src:pr,title:"Move picture up or down",alt:"Move image via drag'n'drop"},Sr=y("svg",{width:"36",height:"36"},[y("path",{d:"M2 25h32L18 9 2 25Z"})],-1),Tr=[Sr],Dr=y("svg",{width:"36",height:"36"},[y("path",{d:"M2 11h32L18 27 2 11Z"})],-1),xr=[Dr],Cn=Ut({__name:"GalleryItem",props:{fileItem:{},isLoc:{type:Boolean}},setup(e){const t=Xt(),{galleryFiles:n,locationFiles:o}=Yt(t),i=e=>URL.createObjectURL(e),a=Ee(Array.isArray(x.galleryArray)?x.galleryArray:[]);function r(){"function"==typeof O.generateGalleryArray&&O.generateGalleryArray(),a.value=Array.isArray(x.galleryArray)?x.galleryArray:[]}function l(e,t){const i=n.value.indexOf(e),a=o.value.indexOf(e),r=(()=>{if(-1!==i)return n;if(-1!==a)return o;throw new Error("Couldn't find item!")})(),l=r.value.indexOf(e);if("up"===t&&l)r.value.splice(l-1,0,e),r.value.splice(l+1,1);else if("down"===t&&l!==r.value.length-1){const t=r.value.filter((t=>t!==e));t.splice(l+1,0,e),r.value=t}}return Wt((()=>r())),(e,t)=>(A(),M("div",hr,[y("a",{class:"gallery-media",href:i(e.fileItem.file),target:"_blank",rel:"noopener noreferrer"},[y("img",{src:i(e.fileItem.file),alt:e.fileItem.file.name},null,8,gr)],8,mr),y("div",vr,[y("p",br,[yr,Nt(Ie(e.fileItem.file.name),1)]),le(y("div",null,[le(y("select",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.fileItem.desc=t),onMousedown:r,onTouchstart:r},[(A(!0),M(ue,null,Te(a.value,(e=>(A(),M("option",{value:e,key:e},Ie(e),9,Er)))),128))],544),[[ci,e.fileItem.desc]])],512),[[De,a.value.length]]),y("div",null,[le(y("input",{type:"text",placeholder:"Description","onUpdate:modelValue":t[1]||(t[1]=t=>e.fileItem.desc=t)},null,512),[[ui,e.fileItem.desc]])])]),y("div",wr,[y("button",{class:"delete-icon is-clickable",title:"Remove picture from gallery",onClick:t[2]||(t[2]=t=>function(e){n.value=n.value.filter((t=>t!==e)),o.value=o.value.filter((t=>t!==e))}(e.fileItem))},"  "),le(y("img",_r,null,512),[[De,!e.isLoc]]),le(y("button",{class:"button moveButton",title:"Move up","data-move":"up",onClick:t[3]||(t[3]=t=>l(e.fileItem,"up"))},Tr,512),[[De,!e.isLoc]]),le(y("button",{class:"button moveButton",title:"Move down","data-move":"down",onClick:t[4]||(t[4]=t=>l(e.fileItem,"down"))},xr,512),[[De,!e.isLoc]])])]))}}),bt=e=>($n("data-v-22160e25"),e=e(),Un(),e),Ir=["onDrop"],Cr=bt((()=>y("span",{class:"drop-title"},"Drop gallery files here",-1))),Ar={key:0,class:"tooltip",name:"galleryFileUploadTooltip"},Or=bt((()=>y("data",null,"There is a preferred order of pictures.",-1))),kr=bt((()=>y("data",null,"Gallery",-1))),Pr=["innerHTML"],Nr={key:0,class:"error-list"},Mr=bt((()=>y("div",null,[Nt("The following file(s) exceed the 10MB upload limit and couldn't be added. You can compress them with the "),y("a",{href:"https://nmscd.com/Image-Compressor/",target:"_blank",rel:"noopener noreferrer"},"Image Compressor"),Nt(". ")],-1))),Lr=Ut({__name:"FileUpload",setup(e){const t=Ee(null),n=Ee(!1),o=Ee([]),i=Ee("");Wt((()=>{tn((()=>{x.galleryExplanationExternal&&(i.value="string"==typeof x.galleryExplanationExternal?x.galleryExplanationExternal:"",tn((()=>{i.value&&Mn()})))}))}));let a=0;const r=Xt(),{galleryFiles:l}=Yt(r);function s(e){var t;n.value=!1;const o=null==(t=e.dataTransfer)?void 0:t.files;null!=o&&o.length&&u(o)}function c(e){if(!(e.target instanceof HTMLInputElement))return;const t=e.target.files;null!=t&&t.length&&u(t)}function u(e){const t=Array.from(e),n=t.filter((e=>e.size>1e7));o.value=n.map((e=>e.name));const i=t.filter((e=>!n.includes(e)));(function(e,t){for(const n of[e].flat())t.value.unshift({id:a++,desc:"",file:n})})(Array.from(i),l),!j.galleryUploadShown&&i.length&&(x.galleryExplanationExternal&&Lo("Gallery",`${x.galleryExplanationExternal}\n\t<div class="mt-3"><span class="has-text-weight-bold">NOTE</span>: You can access this popup at any time by clicking on the "?" next to the gallery upload button.</div>`),j.galleryUploadShown=!0)}return(e,a)=>(A(),M(ue,null,[y("label",{for:"galleryUpload",class:nn(["drop-container",{"drag-active":n.value}]),onDragenter:a[0]||(a[0]=e=>n.value=!0),onDragleave:a[1]||(a[1]=e=>n.value=!1),onDrop:mn(s,["prevent"]),onDragover:a[2]||(a[2]=mn((()=>{}),["prevent"]))},[y("div",null,[Cr,i.value?(A(),M("button",Ar,[Or,kr,y("data",{innerHTML:i.value},null,8,Pr)])):$e("",!0)]),y("input",{ref_key:"galleryUpload",ref:t,class:nn({error:o.value.length}),accept:"image/*",type:"file",id:"galleryUpload",multiple:"",onChange:c},null,34)],42,Ir),o.value.length?(A(),M("div",Nr,[Mr,(A(!0),M(ue,null,Te(o.value,(e=>(A(),M("div",{key:e},Ie(e),1)))),128))])):$e("",!0)],64))}}),io=(e,t)=>{const n=e.__vccOpts||e;for(const[e,o]of t)n[e]=o;return n},Fr=io(Lr,[["__scopeId","data-v-22160e25"]]),oe=e=>($n("data-v-526cbe02"),e=e(),Un(),e),Br={key:0,class:"gallery-preview-header"},Rr=oe((()=>y("label",{class:"has-text-weight-bold"},"Gallery Preview",-1))),Hr={key:0,class:"gallery-preview"},Gr=oe((()=>y("label",{class:"has-text-weight-bold is-block mb-1"},"Location Files",-1))),$r={id:"gallery"},Ur=oe((()=>y("div",null,"==Gallery==",-1))),Xr=oe((()=>y("div",null,"<gallery>",-1))),Yr={id:"galleryOutput"},Wr=oe((()=>y("div",null,"</gallery>",-1))),jr={key:0,id:"locationGallery"},zr=oe((()=>y("br",null,null,-1))),qr=oe((()=>y("div",null,"===Location===",-1))),Kr=oe((()=>y("div",null,"<gallery>",-1))),Vr={id:"locationGalleryOutput"},Zr=oe((()=>y("div",null,"</gallery>",-1))),Jr=Ut({__name:"App",setup(e){const t=Ee(null),n=Ee(!1);Wt((()=>{window.matchMedia("(pointer: coarse)").matches||!t.value||new v(t.value,{handle:".handle",animation:250,onUpdate:function(e){!function(e){const t=e.oldIndex,n=e.newIndex;if("number"!=typeof t||"number"!=typeof n)return;const o=i.value.splice(t,1);i.value.splice(n,0,o[0])}(e)}})}));const o=Xt(),{galleryFiles:i,locationFiles:a}=Yt(o);function r(e){i.value.push(e);const t=a.value.indexOf(e);a.value.splice(t,1)}function l(e){return e.file.name+(e.desc?"|"+e.desc:"")}function s(){n.value=!n.value}return Fo((()=>{if(i.value.length+a.value.length>5&&("fauna"===x.pageType||"sandworm"===x.pageType)){const e=["Moon Page","Planet Page","System Page","Galaxy Map"],t=e.map((e=>e.toLowerCase())),n=i.value.filter((e=>t.includes(e.desc.toLowerCase())));for(let o=n.length-1;o>=0;o--){const r=n[o],l=t.indexOf(r.desc.toLowerCase());r.desc=e[l],a.value.push(r);const s=i.value.indexOf(r);i.value.splice(s,1)}for(let e=a.value.length-1;e>=0;e--){const n=a.value[e];t.includes(n.desc.toLowerCase())||r(n)}a.value=e.flatMap((e=>a.value.filter((t=>t.desc===e))))}else for(let e=a.value.length-1;e>=0;e--)r(a.value[e])})),(e,o)=>(A(),M(ue,null,[Bo(Fr),(A(),Je(on,{to:"#galleryItems"},[ae(i).length?(A(),M("div",Br,[Rr,y("button",{class:"button",onClick:s},Ie(n.value?"Show":"Hide"),1)])):$e("",!0),le(y("div",null,[le(y("div",{ref_key:"filePreview",ref:t,class:"gallery-preview"},[(A(!0),M(ue,null,Te(ae(i),(e=>(A(),Je(Cn,{key:e.id,"file-item":e,"is-loc":!1},null,8,["file-item"])))),128))],512),[[De,ae(i).length]]),ae(a).length?(A(),M("div",Hr,[Gr,(A(!0),M(ue,null,Te(ae(a),(e=>(A(),Je(Cn,{key:e.id,"file-item":e,"is-loc":!0},null,8,["file-item"])))),128))])):$e("",!0)],512),[[De,!n.value]])])),(A(),Je(on,{to:"#gallery"},[y("div",$r,[Ur,Xr,y("div",Yr,[(A(!0),M(ue,null,Te(ae(i),(e=>(A(),M("div",{key:e.id},Ie(l(e)),1)))),128))]),Wr]),ae(a).length?(A(),M("div",jr,[zr,qr,Kr,y("div",Vr,[(A(!0),M(ue,null,Te(ae(a),(e=>(A(),M("div",{key:e.id},Ie(l(e)),1)))),128))]),Zr])):$e("",!0)]))],64))}}),Qr=io(Jr,[["__scopeId","data-v-526cbe02"]]),ro=mi(Qr);ro.use(Ro()),ro.mount("#galleryInput"),Ho(L.output.portalglyphButtons,"portalglyphsInput");const ea=Go();$t("pageType",ea),$o(),Ln(),Uo(),j.uploadShown=!0,j.galleryUploadShown=!0,Fn(),j.debug||(j.uploadShown=!1,j.galleryUploadShown=!1),ut();const ao=L.output.output;ao.onmousedown=()=>Xo();for(const e of Array.from(ao.children)){const t=e;t.onmouseup=e=>rn(e.target),t.ontouchend=e=>rn(e.target)}Yo();try{Gn(L.input.portalglyphsInput,"input")}catch{}$t("eventListeners",!0);export{Fi as a,Bi as b,Li as c,ia as d,zt as e,Pi as f,ki as g,Mi as h,Ni as i,oa as t};
